<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.150.1/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --aurora-pink: hsla(333, 70%, 55%, .4);
            --aurora-purple: hsla(282, 82%, 54%, .3);
            --aurora-blue: hsla(210, 89%, 60%, .3);
            --aurora-gold: hsla(35, 90%, 60%, .3);
            --card-bg: rgba(12, 10, 9, 0.7);
            --card-border: rgba(255, 255, 255, 0.1);
            --button-gradient: linear-gradient(90deg, #ff6a88 0%, #ff9a8d 100%);
            --text-gradient: linear-gradient(90deg, #ffebf0 0%, #ffe0e6 100%);
        }

        body {
            font-family: 'Satoshi', sans-serif;
            color: #e0e0e0;
            background-color: #0c0a09;
            overflow: hidden; /* Hide scrollbars */
        }

        .aurora-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 30%, var(--aurora-pink) 0%, transparent 40%),
                        radial-gradient(circle at 80% 70%, var(--aurora-purple) 0%, transparent 40%),
                        radial-gradient(circle at 10% 90%, var(--aurora-blue) 0%, transparent 40%),
                        radial-gradient(circle at 90% 10%, var(--aurora-gold) 0%, transparent 40%);
            background-size: 200% 200%;
            animation: aurora-flow 30s ease infinite alternate;
            z-index: -2;
        }

        <!-- 🔊 Background Music -->
<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mp3">
</audio>

<!-- 🔊 Music Toggle Button -->
<button id="musicToggle" onclick="toggleMusic()" 
        style="position: fixed; top: 20px; right: 20px; 
               background: linear-gradient(90deg, #ff6a88 0%, #ff9a8d 100%);
               color: white; padding: 0.6rem 1.2rem; border: none;
               border-radius: 9999px; font-weight: 600; cursor: pointer;
               z-index: 100; box-shadow: 0 0 15px rgba(255, 106, 136, 0.6);
               transition: transform 0.3s ease;">
  🔊 On
</button>


        @keyframes aurora-flow {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            z-index: 10;
        }
        
        .glass-card.active {
            opacity: 1;
        }

        .heading-gradient {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 700;
            background: var(--text-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .subheading-gradient {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--text-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .pill-button {
            background: var(--button-gradient);
            border-radius: 9999px;
            padding: 0.75rem 2rem;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 0 15px rgba(255, 106, 136, 0.6);
            transition: all 0.3s ease;
            outline: none;
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .pill-button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .pill-button:hover::before {
            opacity: 1;
        }

        .pill-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 0 25px rgba(255, 106, 136, 0.9);
        }

        .pill-button:active {
            transform: translateY(0px) scale(1);
            box-shadow: 0 0 10px rgba(255, 106, 136, 0.4);
        }

        .progress-bar-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 600px;
            height: 8px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 9999px;
            border: 1px solid var(--card-border);
            overflow: hidden;
            z-index: 50;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%;
            background: var(--button-gradient);
            border-radius: 9999px;
            transition: width 0.6s ease-out;
        }

        .emoji-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            animation: pulse-glow 2s infinite alternate;
        }

        @keyframes pulse-glow {
            0% {
                text-shadow: 0 0 5px rgba(255, 106, 136, 0.5), 0 0 10px rgba(255, 106, 136, 0.3);
                transform: scale(1);
            }
            100% {
                text-shadow: 0 0 15px rgba(255, 106, 136, 0.8), 0 0 30px rgba(255, 106, 136, 0.6);
                transform: scale(1.05);
            }
        }

        .bento-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
            margin-bottom: 2rem;
        }

        .bento-card {
            background: rgba(12, 10, 9, 0.8);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 1rem;
            padding: 1.5rem;
            text-align: left;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .bento-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,106,136,0.1) 0%, transparent 50%, rgba(255,154,141,0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .bento-card:hover::before {
            opacity: 1;
        }

        .bento-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .bento-card.col-span-2 {
            grid-column: span 2;
        }

        .bento-card p {
            font-size: 0.95rem;
            color: #b0b0b0;
            line-height: 1.5;
        }

        .polaroid-container {
            position: relative;
            width: 300px;
            height: 350px;
            margin: 2rem auto;
            perspective: 1000px; /* For 3D tilt */
        }

        .polaroid {
            background: white;
            padding: 1rem 1rem 3rem 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            transition: transform 0.1s ease-out;
            transform: rotateZ(-5deg); /* Initial slight tilt */
            transform-style: preserve-3d;
            border-radius: 4px;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

        .polaroid img {
            max-width: 100%;
            height: auto;
            display: block;
            object-fit: contain;
            background-color: #f0f0f0;
        }

        .polaroid-caption {
            color: #333;
            font-family: 'Satoshi', sans-serif;
            font-size: 1rem;
            margin-top: 1rem;
            font-weight: 500;
        }

        #finalMessage {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            font-weight: 700;
            background: var(--text-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-top: 3rem;
            opacity: 0;
            transform: translateY(20px);
            position: relative;
            z-index: 10;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .heading-gradient {
                font-size: 2.5rem;
            }
            .subheading-gradient {
                font-size: 1.5rem;
            }
            .glass-card {
                padding: 1.5rem;
                width: 95%;
            }
            .emoji-icon {
                font-size: 3rem;
            }
            .bento-grid {
                grid-template-columns: 1fr;
            }
            .bento-card.col-span-2 {
                grid-column: span 1;
            }
            .polaroid-container {
                width: 250px;
                height: 300px;
            }
            #finalMessage {
                font-size: 2rem;
            }
            .progress-bar-container {
                width: 90%;
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex items-center justify-center relative">
    <div class="aurora-bg"></div>

    <!-- Three.js Canvas for 3D Hearts -->
    <canvas id="heartCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;"></canvas>


    <!--🔊 Background Music-->
<audio id="bgMusic" loop>
  <source src="man_mast_magan.mp3" type="audio/mp3">
</audio>

<!-- 🔊 Music Toggle Button -->
<button id="musicToggle" onclick="toggleMusic()" 
        style="position: fixed; top: 20px; right: 20px; 
               background: linear-gradient(90deg, #ff6a88 0%, #ff9a8d 100%);
               color: white; padding: 0.6rem 1.2rem; border: none;
               border-radius: 9999px; font-weight: 600; cursor: pointer;
               z-index: 100; box-shadow: 0 0 15px rgba(255, 106, 136, 0.6);
               transition: transform 0.3s ease;">
  🔊 On
</button>

    <!-- Progress Bar -->
    <div class="progress-bar-container">
        <div class="progress-bar-fill" id="progressBar"></div>
    </div>

    <!-- Step 1: The Grand Welcome -->
    <div id="step1" class="glass-card flex flex-col items-center justify-center">
        <span class="emoji-icon" style="animation-delay: 0s;">❤️</span>
        <h1 class="heading-gradient text-4xl font-bold mb-4">Hey Beautiful,</h1>
        <p class="text-lg mb-8 text-gray-300">Please, hasti raha karo,keep smiling,hasti hui bohot achhi lagti ho.</p>
        <button class="pill-button" onclick="nextStep(2)">Let's Begin</button>
    </div>

    <!-- Step 2: The Core Message -->
    <div id="step2" class="glass-card flex flex-col items-center justify-center hidden">
        <span class="emoji-icon" style="animation-delay: 0.2s;">🎉</span>
        <h1 class="heading-gradient text-4xl font-bold mb-4">Happy Birthday!</h1>
        <p class="text-lg mb-8 text-gray-300">I wish u achieve all the success,health,wealth,love in the upcoming year </p>
        <button class="pill-button" onclick="nextStep(3)">There's more...</button>
    </div>

    <!-- Step 3: The Reasons Why (Bento Grid) -->
    <div id="step3" class="glass-card flex flex-col items-center justify-center hidden max-w-2xl w-full">
        <h1 class="heading-gradient text-4xl font-bold mb-8">A Few Things I Adore About You</h1>
        <div class="bento-grid">
            <div class="bento-card col-span-2">
                <h2 class="subheading-gradient">✨ Your Unmatched Kindness</h2>
                <p>The genuine warmth you show to everyone is something truly rare and beautiful.</p>
            </div>
            <div class="bento-card">
                <h2 class="subheading-gradient">😊 That Smile</h2>
                <p>It's a work of art and lovely smile by seeing which I fell hard for you.</p>
            </div>
            <div class="bento-card">
                <h2 class="subheading-gradient">🌟 Your Radiant Spirit</h2>
                <p>Your passion for life is infectious. Being around you makes everything feel more exciting and possible.</p>
            </div>
        </div>
        <button class="pill-button" onclick="nextStep(4)">Remember this?</button>
    </div>

    <!-- Step 4: The Shared Memory -->
    <div id="step4" class="glass-card flex flex-col items-center justify-center hidden">
        <h1 class="heading-gradient text-4xl font-bold mb-4">That One Time...</h1>
        <div class="polaroid-container" id="polaroidContainer">
            <div class="polaroid" id="polaroid">
                <img src="img22.jpg" alt="Our favorite memory">
                <p class="polaroid-caption">The Beauty in u ❤️</p>
            </div>
        </div>
        <p class="text-lg mt-8 mb-8 text-gray-300">Every moment with you feels like a scene from a movie I'd watch on repeat.</p>
        <!-- 🌸 Your Beauty Button -->
<button id="beautyBtn" 
        onclick="window.location.href='beauty.html'"
        style="margin-top: 20px; background: linear-gradient(90deg, #ff8da1 0%, #ffb3c1 100%);
               color: white; padding: 0.7rem 1.5rem; border: none;
               border-radius: 50px; font-weight: bold; cursor: pointer;
               font-size: 1.1rem; box-shadow: 0 0 15px rgba(255, 140, 160, 0.6);
               transition: transform 0.3s ease;">
  💖 Your Beauty
</button>

        <button class="pill-button" onclick="nextStep(5)">One last thing...</button>

        
    </div>

    <!-- Step 5: The Birthday Wish & Finale -->
    <div id="step5" class="glass-card flex flex-col items-center justify-center hidden">
        <span class="emoji-icon" style="animation-delay: 0.8s;">🎂</span>
        <h1 class="heading-gradient text-4xl font-bold mb-4">My Wish For You</h1>
        <p class="text-lg mb-8 text-gray-300">May the next year bring you all the love, success, and pure happiness you so rightfully deserve. May your dreams soar higher than ever.</p>
        <button class="pill-button" id="celebrateButton" onclick="celebrate()">Celebrate!</button>
        <p id="finalMessage" class="text-center"></p>
    </div>

    <script>
        const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];
        let currentStepIndex = 0;
        const progressBar = document.getElementById('progressBar');
        const totalSteps = steps.length;

        function updateProgressBar() {
            const progress = (currentStepIndex + 1) / totalSteps * 100;
            progressBar.style.width = `${progress}%`;
        }

        function nextStep(stepNumber) {
            const currentStepElement = document.getElementById(steps[currentStepIndex]);
            const nextStepElement = document.getElementById(steps[stepNumber - 1]);

            if (currentStepElement && nextStepElement) {
                gsap.to(currentStepElement, {
                    opacity: 0,
                    y: -20,
                    scale: 0.95,
                    duration: 0.5,
                    onComplete: () => {
                        currentStepElement.classList.add('hidden');
                        nextStepElement.classList.remove('hidden');
                        gsap.fromTo(nextStepElement,
                            { opacity: 0, y: 20, scale: 0.95 },
                            {
                                opacity: 1,
                                y: 0,
                                scale: 1,
                                duration: 0.6,
                                ease: "power3.out",
                                onStart: () => {
                                    nextStepElement.classList.add('active'); // Add active class for transitions
                                },
                                onComplete: () => {
                                    // Animate in internal elements with stagger
                                    gsap.fromTo(nextStepElement.children,
                                        { opacity: 0, y: 10 },
                                        { opacity: 1, y: 0, duration: 0.4, stagger: 0.1, ease: "power2.out" }
                                    );
                                }
                            }
                        );
                        currentStepIndex = stepNumber - 1;
                        updateProgressBar();
                    }
                });
            }
        }

        function celebrate() {
            const celebrateButton = document.getElementById('celebrateButton');
            const finalMessage = document.getElementById('finalMessage');
            const step5Card = document.getElementById('step5');

            gsap.to(celebrateButton, {
                opacity: 0,
                scale: 0.8,
                duration: 0.4,
                onComplete: () => {
                    celebrateButton.style.display = 'none';
                    finalMessage.textContent = "Happy Birthday, Meri brownie! 🤎❤️";
                    gsap.fromTo(finalMessage,
                        { opacity: 0, y: 20 },
                        { opacity: 1, y: 0, duration: 1.5, ease: "power4.out" }
                    );
                }
            });

            // Confetti explosion
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            // Burst confetti from bottom corners
            const burstConfetti = () => {
                confetti(Object.assign({}, defaults, {
                    particleCount: randomInRange(50, 100),
                    origin: { x: randomInRange(0.1, 0.3), y: randomInRange(0.8, 0.9) },
                    colors: ['#ff6a88', '#ff9a8d', '#f472b6', '#a78bfa', '#60a5fa', '#fcd34d'],
                    scalar: 1.2
                }));
                confetti(Object.assign({}, defaults, {
                    particleCount: randomInRange(50, 100),
                    origin: { x: randomInRange(0.7, 0.9), y: randomInRange(0.8, 0.9) },
                    colors: ['#ff6a88', '#ff9a8d', '#f472b6', '#a78bfa', '#60a5fa', '#fcd34d'],
                    scalar: 1.2
                }));
            };
            burstConfetti(); // Initial burst

            // Continuous gentle shower
            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                // Standard confetti
                confetti(Object.assign({}, defaults, {
                    particleCount: 15,
                    origin: { x: randomInRange(0.1, 0.9), y: Math.random() - 0.2 },
                    colors: ['#ff6a88', '#ff9a8d', '#f472b6', '#a78bfa', '#60a5fa', '#fcd34d'],
                    scalar: randomInRange(0.7, 1.2),
                    gravity: 0.8,
                    disableForReducedMotion: true
                }));

                // Emoji confetti
                confetti(Object.assign({}, defaults, {
                    particleCount: 5,
                    origin: { x: randomInRange(0.1, 0.9), y: Math.random() - 0.2 },
                    colors: ['#ff6a88', '#ff9a8d'],
                    shapes: ['emoji'],
                    scalar: randomInRange(1.2, 1.8),
                    gravity: 0.9,
                    emojis: ['❤️', '💖', '✨'],
                    disableForReducedMotion: true
                }));
            }, 100);

          


            // 3D hearts farewell animation
            gsap.to(heartMeshes, {
                duration: 3,
                x: (i, target) => target.position.x > 0 ? "+=300" : "-=300",
                y: (i, target) => "+=500", // Float up
                z: (i, target) => "+=100",
                opacity: 0, // Not directly on mesh, handle in render loop
                ease: "power2.in",
                stagger: 0.02,
                onUpdate: () => {
                    heartMeshes.forEach(mesh => {
                        mesh.material.opacity = gsap.getProperty(mesh, "opacity");
                        mesh.material.transparent = true;
                        mesh.material.needsUpdate = true;
                    });
                },
                onComplete: () => {
                    heartMeshes.forEach(mesh => scene.remove(mesh));
                    heartMeshes = []; // Clear array
                }
            });
        }

        // Initial setup
        document.addEventListener('DOMContentLoaded', () => {
            gsap.set('#step1', { opacity: 0, y: 20, scale: 0.95 });
            gsap.to('#step1', { opacity: 1, y: 0, scale: 1, duration: 0.8, ease: "power3.out", onComplete: () => {
                document.getElementById('step1').classList.add('active');
                gsap.fromTo('#step1 > *', { opacity: 0, y: 10 }, { opacity: 1, y: 0, duration: 0.5, stagger: 0.1, ease: "power2.out" });
            } });
            updateProgressBar();
        });

        // Polaroid Hover Effect
        const polaroidContainer = document.getElementById('polaroidContainer');
        const polaroid = document.getElementById('polaroid');

        if (polaroidContainer && polaroid) {
            polaroidContainer.addEventListener('mousemove', (e) => {
                const rect = polaroidContainer.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const rotateX = (y - centerY) / centerY * 10; // Max 10 degrees tilt
                const rotateY = (x - centerX) / centerX * 10; // Max 10 degrees tilt

                gsap.to(polaroid, {
                    rotationX: -rotateX,
                    rotationY: rotateY,
                    y: -rotateX, // Slight vertical shift for parallax
                    x: rotateY, // Slight horizontal shift for parallax
                    duration: 0.3,
                    ease: "power1.out"
                });
            });

            polaroidContainer.addEventListener('mouseleave', () => {
                gsap.to(polaroid, {
                    rotationX: 0,
                    rotationY: 0,
                    y: 0,
                    x: 0,
                    rotateZ: -5, // Return to initial Z tilt
                    duration: 0.5,
                    ease: "elastic.out(1, 0.5)"
                });
            });
        }


        // Three.js for 3D Floating Hearts
        let scene, camera, renderer, heartMeshes = [];

        function initHearts() {
            const container = document.getElementById('heartCanvas');
            
            // Scene
            scene = new THREE.Scene();

            // Camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 25;

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, canvas: container });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            // Lights
            const ambientLight = new THREE.AmbientLight(0x404040); // Soft white light
            scene.add(ambientLight);

            const pointLight = new THREE.PointLight(0xffffff, 1);
            pointLight.position.set(10, 10, 10);
            scene.add(pointLight);

            // Heart Shape Geometry (approximated)
            const heartShape = new THREE.Shape();
            heartShape.moveTo(0.25, 0.25);
            heartShape.bezierCurveTo(0.25, 0.25, 0.2, 0, 0, 0);
            heartShape.bezierCurveTo(-0.3, 0, -0.3, 0.35, -0.3, 0.35);
            heartShape.bezierCurveTo(-0.3, 0.55, -0.1, 0.77, 0.25, 0.95);
            heartShape.bezierCurveTo(0.6, 0.77, 0.8, 0.55, 0.8, 0.35);
            heartShape.bezierCurveTo(0.8, 0.35, 0.8, 0, 0.5, 0);
            heartShape.bezierCurveTo(0.35, 0, 0.25, 0.25, 0.25, 0.25);

            const extrudeSettings = {
                steps: 2,
                depth: 0.2,
                bevelEnabled: true,
                bevelThickness: 0.1,
                bevelSize: 0.05,
                bevelOffset: 0,
                bevelSegments: 10
            };

            const heartGeometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);

            // Create hearts
            const numHearts = 25;
            for (let i = 0; i < numHearts; i++) {
                const material = new THREE.MeshPhongMaterial({
                    color: new THREE.Color(`hsl(${Math.random() * 20 + 340}, 80%, 65%)`), // Pink/red hues
                    specular: 0xcccccc, // For sheen
                    shininess: 30,
                    transparent: true,
                    opacity: 0.6 + Math.random() * 0.3 // Random opacity
                });

                const heart = new THREE.Mesh(heartGeometry, material);

                // Random position
                heart.position.x = (Math.random() - 0.5) * 60;
                heart.position.y = (Math.random() - 0.5) * 40;
                heart.position.z = (Math.random() - 0.5) * 50 - 10; // Push some further back

                // Random scale
                const scale = Math.random() * 1 + 0.5;
                heart.scale.set(scale, scale, scale);

                // Random rotation
                heart.rotation.x = Math.random() * Math.PI;
                heart.rotation.y = Math.random() * Math.PI;
                heart.rotation.z = Math.random() * Math.PI;

                heart.initialY = heart.position.y; // Store initial Y for sine wave
                heart.rotationSpeed = Math.random() * 0.01 + 0.005; // Random rotation speed
                heart.driftSpeedX = (Math.random() - 0.5) * 0.02;
                heart.driftSpeedY = (Math.random() - 0.5) * 0.02;

                scene.add(heart);
                heartMeshes.push(heart);
            }

            window.addEventListener('resize', onWindowResize, false);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animateHearts() {
            requestAnimationFrame(animateHearts);

            heartMeshes.forEach(heart => {
                // Subtle sine wave motion
                heart.position.y = heart.initialY + Math.sin(Date.now() * 0.001 + heart.initialY) * 2;
                
                // Drift
                heart.position.x += heart.driftSpeedX * 0.5;
                heart.position.y += heart.driftSpeedY * 0.5;

                // Loop hearts back if they drift too far
                if (heart.position.x > 30 || heart.position.x < -30) heart.position.x *= -1;
                if (heart.position.y > 20 || heart.position.y < -20) heart.position.y *= -1;

                // Gentle rotation
                heart.rotation.x += heart.rotationSpeed * 0.5;
                heart.rotation.y += heart.rotationSpeed * 0.5;
            });

            renderer.render(scene, camera);
        }

        initHearts();
        animateHearts();

//          // 🎵 Background Music Control
// const music = document.getElementById('bgMusic');
// const toggleBtn = document.getElementById('musicToggle');
// let musicPlaying = false;

// // Try to start music when page loads (if allowed)
// document.addEventListener('DOMContentLoaded', () => {
//   const tryPlay = () => {
//     music.volume = 0.4;
//     music.play().then(() => {
//       musicPlaying = true;
//       toggleBtn.textContent = "🔊 On";
//     }).catch(() => {
//       console.log("Autoplay blocked — will start after first click.");
//     });
//   };

//   // Try autoplay once the DOM is ready
//   tryPlay();

//   // As backup: start music on *first* click anywhere
//   document.body.addEventListener('click', () => {
//     if (!musicPlaying) {
//       tryPlay();
//     }
//   }, { once: true });
// });

// // Manual toggle
// function toggleMusic() {
//   if (musicPlaying) {
//     music.pause();
//     toggleBtn.textContent = "🔇 Off";
//     musicPlaying = false;
//   } else {
//     music.play();
//     toggleBtn.textContent = "🔊 On";
//     musicPlaying = true;
//   }
// }

// 🎵 Background Music Control (Guaranteed fade-in)
const music = document.getElementById('bgMusic');
const toggleBtn = document.getElementById('musicToggle');
let musicPlaying = false;

// Smooth fade-in
function fadeInMusic(targetVolume = 0.4, duration = 3000) {
  music.volume = 0;
  music.play().then(() => {
    musicPlaying = true;
    toggleBtn.textContent = "🔊 On";
    const step = targetVolume / (duration / 50); // smoother interval
    const fade = setInterval(() => {
      if (music.volume < targetVolume && !music.paused) {
        music.volume = Math.min(targetVolume, music.volume + step);
      } else {
        clearInterval(fade);
      }
    }, 50);
  }).catch(() => {
    console.log("Autoplay blocked — waiting for user interaction.");
  });
}

// Wait for first user click to allow playback
document.addEventListener("click", () => {
  if (!musicPlaying) {
    fadeInMusic(); // start with smooth fade
  }
}, { once: true });

// Manual toggle
function toggleMusic() {
  if (musicPlaying) {
    // Smooth fade-out before pausing
    const fadeOut = setInterval(() => {
      if (music.volume > 0.05) {
        music.volume -= 0.05;
      } else {
        clearInterval(fadeOut);
        music.pause();
        toggleBtn.textContent = "🔇 Off";
        musicPlaying = false;
      }
    }, 100);
  } else {
    fadeInMusic(); // fade in when turning on
  }
}



    </script>
</body>
</html>
